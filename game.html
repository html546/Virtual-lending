<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!-- <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous"> -->
  <link rel="stylesheet" href="./css/bootstrap.min.css">  
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./css/pledgebit.css">
  <link rel="stylesheet" href="./css/bootstrap-datetimepicker.min.css">
  <link rel="stylesheet" href="./css/fileinput.min.css">
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
    <script src="./js/bootstrap-datetimepicker.min.js"></script>
    <script src="./js/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="./js/fileinput.min.js"></script>
    <script src="./js/fileinput_locale_zh.js"></script>
</head>

<body>
  <!-- 导航与背景 -->
  <div class="container-fulid">
    <nav class="navbar navbar-inverse">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
            aria-expanded="false">
                          <span class="sr-only">Toggle navigation</span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                        </button>
          <a class="navbar-brand" href="#">LOGO果粒多数字商品抵押</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a class="active" href="./index.html">首页</a></li>
            <li><a href="#">我要赎回</a></li>
            <li><a href="#">财务中心</a></li>
            <li><a href="#">个人中心</a></li>
            <li><a href="./login.html" class="entry">登录</a></li>
            <li><a href="./register.html" class="register">注册</a></li>
            <li><a href="#" class="notice">公告</a></li>
            <li><a href="#" class="help">帮助</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
    </nav>
  </div>
  <!-- 抵押信息 -->
  <div class="container-fulid bit-pledge">
      <div class="container" style="background:#fff;padding:0px;">
        <!-- 面包屑 -->
        <ol class="breadcrumb">
            <li><a href="#">您当前位置:首页</a></li>
            <li><a href="#" class="active2">商品抵押/王者荣耀</a></li>
        </ol>
        <!-- 抵押状态栏 -->
        <div class="state">
            <div class="pledge-message pull-left active4">
                <div class="circle  pull-left">1</div>
                <p class="pull-left">抵押信息</p>
                <p class="pull-left hidden-xs">——————</p>
            </div>
            <div class="pledge-message pull-left">
                <div class="circle pull-left">2</div>
                <p class="pull-left">审核中</p>
                <p class="pull-left hidden-xs">——————————</p>
            </div>
            <div class="pledge-message pull-left">
                <div class="circle pull-left">3</div>
                <p class="pull-left">审核通过已放款</p>
                <p class="pull-left hidden-xs">———</p>
            </div>
            <div class="pledge-message pull-left">
                <div class="circle pull-left">4</div>
                <p class="pull-left">已赎回</p>
            </div>
        </div>
        <div class="hr-line-dashed"></div>
        <!-- 抵押详情表单 -->
        <div class="pledge-detail">
            <form action="" class="form-horizontal">
                <div class="form-group">
                    <label for="cycle" class="control-label col-md-2">交易平台 : </label>
                    <div class="col-md-3">
                         <p class="form-control-static gray">交易平台名称</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">交易链接 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static gray"><a href="#">/http/www.jiaoyilianjie.com/</a></p>
                    </div>
                </div>
                <div class="form-group occupy">
                    <label class="col-md-2 control-label">交易账号 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static">交易账号信息</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">商品名称 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static">王者荣耀账号</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">所属游戏 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static">王者荣耀</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">抵押类型 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static">游戏类</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="ServiceArea" class="col-md-2 control-label">抵押类型 : </label>
                    <div class="col-md-3">
                         <input type="text" class="form-control" id="ServiceArea" placeholder="请输入游戏区服">
                    </div>
                </div>
                <div class="form-group">
                    <label for="pledgeTime" class="col-md-2 control-label">抵押时间 : </label>
                    <div class="input-group date form_date col-md-3 pull-left " data-date="" data-date-format="dd MM yyyy" data-link-field="pledgeTime" data-link-format="yyyy-mm-dd">
                        <input class="form-control" size="16" type="text" value="" readonly placeholder="请选择抵押时间">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                    </div>
                    <input type="hidden" id="pledgeTime" value="" /><br/>
                </div>
                <div class="form-group">
                    <label for="pledgeNumber" class="col-md-2 control-label">抵押编号 : </label>
                    <div class="col-md-3">
                         <input type="text" class="form-control" id="pledgeNumber" placeholder="请输入抵押编号">
                    </div>
                </div>
                <div class="form-group">
                    <label for="describe" class="col-md-2 control-label">描述 : </label>
                    <div class="col-md-9">
                        <textarea id="describe" class="form-control" rows="3" placeholder="请详细描述您要抵押的商品(账号或者装备)信息，如身份证是否设置、账号等级、好友数量、英雄数量、皮肤数量等信息"></textarea> 
                    </div>
                </div>
                <div class="form-group">
                    <label for="picture" class="col-md-2 control-label">图片 : </label>
                    <div class="col-md-9">
                        <input id="picture" name="picture" type="file" class="file" multiple data-show-upload='true' data-show-caption='true'>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cycle" class="control-label col-md-2 col-sm-2 col-xs-6">抵押周期 : </label>
                    <div class="col-md-3 col-sm-3 col-xs-6">
                        <input type="text" class="form-control" id="cycle" placeholder="30天">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">抵押利率 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static">0.2%-0.6%</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">市场价 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static"><span class="red-display">￥666</span></p>
                    </div>
                </div>
                <div class="form-group occupy">
                    <label class="col-md-2 control-label">抵押额度 : </label>
                    <div class="col-md-3">
                        <p class="form-control-static"><span class="red-display">40%-60%</span></p>
                    </div>
                </div>
                <div class="form-group occupy">
                    <div class="row">
                        <button type="submit" class="btn pledge-btn">立即抵押</button>
                    </div>
                </div>
            </form>
            <div class="hr-line-dashed"></div>
            <div class="note">
                <h4>抵押须知</h4>
                <ul>
                    <li>1、抵押须知详细内容-----------------------------</li>
                    <li>2、抵押须知详细内容抵押须知详细内容抵押须知详细内容---------------------------------</li>
                    <li>3、抵押须知详细内容抵押须知详细内容---------------------------</li>
                    <li>4、-----------------------------</li>
                    <li>5、--------------------------------------------</li>
                </ul>
            </div>
        </div>
    </div>
  </div>
  <!-- footer -->
  <div class="base container-fulid">
      <div class="container">
          <p class="qq pull-left">QQ群: <span>66666666</span> </p>
          <p class="email pull-left hidden-xs">邮箱: <span>guolicheng@163.com</span></p>
          <p class="copyright pull-right hidden-xs hidden-sm">虚拟物品抵押平台 copyright @ 2017 - 2020 xuniwupindiya.All Rights Reserved版权所有</p>
      </div>
  </div>
  <script src="./js/layer.js"></script>
  <script>
      let btnGroup = '';
      for(var i = 1;i<=90;i++){
        btnGroup+=`<button class="btn btn-sm formBtn" onclick="text(${i});">${i}</button>`;
      }
      function text(i){
        // alert(i);
        $('#cycle').val(i+'天');
        layer.closeAll();
      }
      $('#cycle').focus(function(){
          layer.open({
              type:1,
              title:['选择抵押周期(天)','padding-left:80px;text-align:center;'],
              closeBtn:1,
              shadeClose:true,
              content:btnGroup,
              area:['600px','400px']
          })
      })
      $('.form_date').datetimepicker({
        todayBtn:  1,
		autoclose: 1,
		minView: 2,
        language:'zh-CN',
        format:'yyyy-mm-dd',
        pickerPosition:'bottom-right'
      });
      $(function () {
            fishFileInput("picture","#");
     })
     function fishFileInput(ctrlName, uploadUrl) {
        $("#picture").fileinput({
            language: 'zh', //设置语言
            uploadUrl: '#', //上传的地址
            enctype: 'multipart/form-data',
            allowedFileExtensions : ['jpg', 'png','bmp','jpeg'],//接收的文件后缀
            showUpload: false, //是否显示上传按钮
            showPreview: true,              //展前预览
            showCaption: false,//是否显示标题
            maxFileSize : 10000,//上传文件最大的尺寸
            maxFilesNum : 10,//
            dropZoneEnabled: false,//是否显示拖拽区域
            browseClass: "btn btn-primary", //按钮样式
            uploadAsync: false,
            layoutTemplates :{
                // actionDelete:'', //去除上传预览的缩略图中的删除图标
                actionUpload:'',//去除上传预览缩略图中的上传图片；
                actionZoom:''   //去除上传预览缩略图中的查看详情预览的缩略图标。
            },
            uploadExtraData:function (previewId, index) {
                //向后台传递id作为额外参数，是后台可以根据id修改对应的图片地址。
                var obj = {};
                obj.id = fishId;
                return obj;
            }
        }).on("filebatchuploadsuccess", function(event, data) {
            if(data.response){
                closeModal('fishAddDetail') //关闭模态框。
                $("#bootstraptable_fishcontent").bootstrapTable("refresh");
            }
        }).on('fileerror', function(event, data, msg) {  //一个文件上传失败
            console.log('文件上传失败！'+msg);
        });
    }
    //新增鱼类名录模态框的提交按钮点击事件。
    $(".fileinput-upload-button").click(function () {
        var picturename="";//获取上传的文件的后缀名，如果不是jpg,或者png的话不出发上传，弹出提示，表单里面的其他内容也不上传。
        picturename=$("#picture").val().substring($("#picture").val().indexOf('.'),$("#picture").val().length).toUpperCase();
        /*当上传的文件的格式是.png .jpg .PNG .JPG时 先将表单内的除图片以外的东西提交到后天，然后在触发插件，将图片上传，保存。
        */
        if (picturename ==".JPG"  || picturename ==".PNG" || picturename =="" || picturename==".BMP"|| picturename==".JPEG") {
            $.ajax({
                type: 'post',
                url: '#',
                data: $("#form_addfishContent").serialize(),
                success: function (data) {
                    fishId = data;
                    //不上传图片时，不触发bootstrap 上传插件的初始化方法。仅将表单里面的（除图片以外的）内容提交，
                    if ($("#picture").val() != "") {
                        $('#picture').fileinput('upload'); //触发插件开始上传。
                    }
                    else {
                        closeModal('fishAddDetail');
                        $("#bootstraptable_fishcontent").bootstrapTable("refresh");
                    }

                }
            });
        }else {
            alert("只能上传.jpg，.png，.PNG,.JPG,bmp,jpeg格式的图片");
            return false;
        }

    });
  </script>
</body>

</html>